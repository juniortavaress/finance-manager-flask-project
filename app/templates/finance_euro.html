{% extends "base.html" %}

{% block title %}Finance Euro{% endblock %}

{% block page %}
  <!-- JSON Data Injection -->
  <script type="application/json" id="data-euro-pie-chart">{{ datas_graph_03|safe }} </script>
  <script type="application/json" id="data-euro-incomes-expenses"> {{ datas_graphs_01_02|safe }} </script>

  <!-- JS Graph Scripts -->
  <script src="{{ url_for('static', filename='js/euro_expenses_analysis.js') }}"></script>
  <script src="{{ url_for('static', filename='js/euro_incomes_expenses.js') }}"></script>
  <script src="{{ url_for('static', filename='js/euro_cumulative_analysis.js') }}"></script>

  <!-- Main Layout -->
  <div id="euro-finance-container">

    <!-- Left Graphs -->
    <div id="euro-left-section">

      <!-- Incomes vs Expenses -->
      <div class="finance-card" id="card-incomes-expenses">
        <div class="header-graph">
          <div class="title-graph">Income vs Expenses</div>
          <div class="select-graph">
            <select id="yearSelect">
              <option value="all" selected>All</option>
              <option value="2024">2024</option>
              <option value="2025">2025</option>
            </select>
            <select id="viewSelect">
              <option value="month">Monthly</option>
              <option value="year">Yearly</option>
            </select>
          </div>
        </div>
        <div class="graph-container" id="chart-income-expenses"> <canvas id="chart-euro-incomes-expenses"></canvas> </div>
      </div>

      <!-- Cumulative Balance -->
      <div class="finance-card" id="card-cumulative-balance">
        <div class="header-graph">
          <div class="title-graph">Cumulative Balance</div>
          <div class="select-graph">
            <select id="yearSelectCumulative">
              <option value="all" selected>All</option>
              <option value="2024">2024</option>
              <option value="2025">2025</option>
            </select>
          </div>
        </div>
        <div class="graph-container" id="chart-cumulative"> <canvas id="chart-cumulative-euro"></canvas> </div>
      </div>
    </div>

    <!-- Right Graphs -->
    <div id="euro-right-section">

      <!-- Euro to BRL Exchange -->
      <div class="finance-card" id="card-euro-exchange">
        <div class="header-graph">
          <div class="title-graph">Exchange Rate — {{ cotacao_euro_brl["data"] }}</div>
        </div>
        <div id="exchange-rate-display">
          <span>1 €</span> <span>=</span> <span>R$ {{ "%.2f"|format(cotacao_euro_brl["valor_eur_brl"]) }}</span>
        </div>
      </div>

      <!-- Monthly Expenses Breakdown -->
      <div class="finance-card" id="card-expenses-breakdown">
        <div class="header-graph">
          <div class="title-graph">Monthly Expense Breakdown</div>
          <div class="select-graph">
            <select id="monthSelect">
              {% for month in months_graph03 %}
                <option value="{{ month }}">{{ month }}</option>
              {% endfor %}
            </select>
          </div>
        </div>
        <div class="graph-container" id="chart-expenses-breakdown"> <canvas id="chart-euro-expenses-pie"></canvas> </div>
      </div>

    </div>
  </div>
{% endblock %}
