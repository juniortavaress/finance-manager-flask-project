
    <div class="header-left">
        <div class="logo-container">
            <img src="{{ url_for('static', filename='images/logo_png.png') }}" alt="logo">
        </div>
        <div id="add-btn" class="icon-button" role="button"><span class="material-symbols-outlined">add</span></div>
        <div class="icon-button" role="button"><span class="material-symbols-outlined">search</span></div>
    </div>

    <div class="header-right">
        <div class="icon-button" role="button"><span class="material-symbols-outlined">notifications</span></div>
        <div class="icon-button" role="button"><span class="material-symbols-outlined">help</span></div>
        
    <a href="{{ url_for('auth.logout') }}" class="icon-button" role="button">
        <span class="material-symbols-outlined">account_circle</span>
    </a>

    </div>

    




<!-- Upload Modal -->
<div id="uploadModal" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>

    <div class="modal-header">
      <h3 class="modal-title">Adicionar Informa√ß√µes de Investimento</h3>
      <p class="modal-subtitle">Escolha o tipo de importa√ß√£o ou inser√ß√£o</p>
    </div>

    <!-- Sele√ß√£o de tipo -->
    <div class="form-group-2">
      <select id="dataTypeSelect" class="form-select">
        <option value="trade_statements">üìÑ Importar Notas de Negocia√ß√£o</option>
        <option value="income_database">üí∞ Importar Base de Rendimentos</option>
        <option value="manual_entry">‚úçÔ∏è Inserir Investimento Manualmente</option>
      </select>
    </div>

    <!-- Formul√°rio de upload (para trade_statements e income_database) -->
    <form id="uploadForm" method="POST" enctype="multipart/form-data">
      <input type="hidden" name="data_type" id="dataType" value="trade_statements">

      <div id="folderSelection" class="form-section">
        <label class="file-input">
          <input type="file" name="files" webkitdirectory directory multiple hidden>
          <span>Click here to select a folder</span>
        </label>
      </div>

      <!-- Formul√°rio manual -->
<!-- Formul√°rio manual -->
  <div id="manualSection" class="form-section" style="display: none;">
    <div class="manual-form-grid">
      <div class="form-group">
        <label for="date">Data</label>
        <input type="date" name="date" id="date" required>
      </div>


      <div class="form-group">
        <label for="brokerage">Corretora</label>
        <select name="brokerage" id="brokerage" required>
          <option value="Nomad">Nomad</option>
          <option value="NuInvest">NuInvest</option>
          <option value="XPInvest">XPInvest</option>
        </select>
      </div>

        <div class="form-group">
        <label for="statement_number">N√∫mero da Nota</label>
        <input type="text" name="statement_number" id="statement_number" placeholder="Opcional">
      </div>


      <div class="form-group">
        <label for="investment_type">Tipo de Investimento</label>
        <select name="investment_type" id="investment_type" required>
          <option value="foreign stock (USD)">Internacional</option>
          <option value="stock">A√ß√µes</option>
          <option value="fixed_income">Renda Fixa</option>
          <option value="real_state">FII`s</option>
          <option value="cripto">Cripto</option>
        </select>
      </div>

      <div class="form-group">
        <label for="operation">Opera√ß√£o</label>
        <select name="operation" id="operation" required>
          <option value="B">Compra</option>
          <option value="S">Venda</option>
        </select>
      </div>

      <div class="form-group">
        <label for="ticker">Ticker</label>
        <input type="text" name="ticker" id="ticker" placeholder="Ex: PETR4, AAPL, BTC" required>
      </div>

      <div class="form-group">
        <label for="quantity">Quantidade</label>
        <input type="number" name="quantity" id="quantity" step="any" required>
      </div>

      <div class="form-group">
        <label for="unit_price">Pre√ßo Unit√°rio (R$)</label>
        <input type="number" name="unit_price" id="unit_price" step="any" required>
      </div>

      <div class="form-group">
        <label for="final_value">Valor Total (R$)</label>
        <input type="number" name="final_value" id="final_value" step="any" required>
      </div>

    </div>
  </div>
      <div style="width: 100%; text-align: center; margin-top: 20px;">
  <button type="submit" class="btn-ok">Confirmar</button>
</div>
    </form>
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const modal = document.getElementById("uploadModal");
  const addBtn = document.getElementById("add-btn");
  const closeBtn = document.querySelector(".close");
  const select = document.getElementById("dataTypeSelect");
  const uploadForm = document.getElementById("uploadForm");
  const folderSection = document.getElementById("folderSelection");
  const manualSection = document.getElementById("manualSection");

  addBtn.onclick = () => modal.style.display = "block";
  closeBtn.onclick = () => modal.style.display = "none";
  window.onclick = (e) => { if (e.target == modal) modal.style.display = "none"; };

  // muda tipo de a√ß√£o dinamicamente
  select.addEventListener("change", (e) => {
    const value = e.target.value;
    document.getElementById("dataType").value = value;

    if (value === "manual_entry") {
      uploadForm.action = "{{ url_for('upload.manual_entry') }}";
      folderSection.style.display = "none";
      manualSection.style.display = "block";
    } else if (value === "income_database") {
      uploadForm.action = "{{ url_for('upload.upload_incomes') }}";
      folderSection.style.display = "block";
      manualSection.style.display = "none";
    } else {
      uploadForm.action = "{{ url_for('upload.upload_notes') }}";
      folderSection.style.display = "block";
      manualSection.style.display = "none";
    }
  });
});
</script>